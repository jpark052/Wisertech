<!DOCTYPE html>
<html lang="en">
<title>Websocket server</title>
</head>

<body>
    <!--<input id="name" />-->
    <!--<textarea id="message"></textarea>-->
    <button onClick="getPics()">Get Pictures</button>
    <div id='messages'></div>
    <img id="mydog" src="" />


    <script>
        const getElement = (id) => document.getElementById(id);
        /*const addMessage = (message) => {
            const pTag = document.createElement('p');
            pTag.appendChild(document.createTextNode(message));
            getElement('messages').appendChild(pTag);
        };*/

        const ws = new WebSocket('ws://10.0.0.223:3030');
        ws.onopen = () => {
            console.log('Now connected');
        };

        ws.onmessage = (event) => {
            // const messages = JSON.parse(event.data);
            // messages.forEach(addMessage);
            //console.log(event.data)
            // const url = atob(message)
            // document.getElementById("mydog").src = url;
            document.getElementById("mydog").src= `data:image/png;base64, ${event.data}`
        };
        const getPics = () => {
            // const username = getElement('name').value || '???'
            // ws.send(`${username}: ${getElement('message').value}`);
            // getElement('message').value = '';
            ws.send('something');
            //document.getElementById("mydog").src="http://cdn.akc.org/content/article-body-image/keeshond_dog_pictures.jpg";
        };

    </script>

</body>

</html>
