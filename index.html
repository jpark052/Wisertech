<!DOCTYPE html>
<html lang="en">

<head>
    <title>Websocket Client Page</title>
</head>

<body>
    <button onClick="getPics()">Get Pictures</button>
    <button onClick="stop()">Stop</button>
    <div id='messages'></div>
    <img id="pic" src="" />

    <script>
        const getElement = (id) => document.getElementById(id)
        const ws = new WebSocket('ws://10.0.0.223:3030')

        ws.onopen = () => {
            console.log('Now connected')
        }

        ws.onmessage = (event) => {
            console.log(event)
            document.getElementById("pic").src = `data:image/png;base64, ${event.data}`
        }

        /**
         * function getPics is triggered when user click the button.
         * the message string 'trigger' itself doesn't do anything
         */
        const getPics = () => {
            ws.send('trigger')
        }
        
        const stop = () => {
            ws.close()
            }
    </script>
</body>

</html>
